# Vibe Coding Prompt - æ™ºæ…§è¡Œäº‹æ›†åŠ©ç†å°ˆæ¡ˆè¦æ ¼

> é€™æ˜¯ä¸€å€‹å®Œæ•´çš„å°ˆæ¡ˆè¦æ ¼æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥æä¾›çµ¦ Cursor æˆ–å…¶ä»– AI ç·¨ç¢¼å·¥å…·ä¾†ç”Ÿæˆä¸€æ¨¡ä¸€æ¨£çš„å°ˆæ¡ˆã€‚

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

**å°ˆæ¡ˆåç¨±**: æ™ºæ…§è¡Œäº‹æ›†åŠ©ç† (Smart Calendar Assistant)

**å°ˆæ¡ˆæè¿°**: ä¸€å€‹æ•´åˆ Google Calendar èˆ‡ Google Gemini AI çš„æ™ºæ…§è¡Œäº‹æ›†å·¥å…·ã€‚ä½¿ç”¨è€…å¯ä»¥é€éè‡ªç„¶çš„ç¹é«”ä¸­æ–‡å°è©±æ–¹å¼ä¾†æŸ¥è©¢ã€æ–°å¢ã€ä¿®æ”¹æˆ–åˆªé™¤è¡Œç¨‹ï¼Œç³»çµ±æœƒè‡ªå‹•åµæ¸¬è¡çªä¸¦çµ¦äºˆå»ºè­°ã€‚

**æ ¸å¿ƒåƒ¹å€¼**: 
- è‡ªç„¶èªè¨€æ“ä½œè¡Œäº‹æ›†
- æ™ºèƒ½è¡çªåµæ¸¬
- é¡ä¼¼ Google Calendar çš„ä½¿ç”¨é«”é©—
- å®Œæ•´çš„å°è©±è¨˜æ†¶åŠŸèƒ½

---

## ğŸ› ï¸ æŠ€è¡“æ£§

### Backend
- **Runtime**: Node.js (v18+)
- **Framework**: Express.js 5.1.0
- **Authentication**: Google OAuth2 (googleapis 166.0.0)
- **AI Service**: Google Generative AI (@google/generative-ai 0.24.1)
- **Environment**: dotenv 17.2.3
- **Middleware**: 
  - body-parser 2.2.0
  - cors 2.8.5

### Frontend
- **HTML5**: èªç¾©åŒ–æ¨™ç±¤
- **CSS3**: è‡ªå®šç¾©è®Šæ•¸ã€Flexboxã€Grid
- **JavaScript**: Vanilla ES6+ (ç„¡æ¡†æ¶)
- **Calendar Library**: FullCalendar 6.1.10 (CDN)
- **Font**: Google Fonts (Inter, Google Sans, Roboto)

### External APIs
- Google Calendar API v3
- Google Gemini API (gemini-2.0-flash æ¨¡å‹)

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
google-calandar-tool/
â”œâ”€â”€ server.js                          # Express ä¼ºæœå™¨å…¥å£
â”œâ”€â”€ package.json                       # ä¾è³´ç®¡ç†
â”œâ”€â”€ .env                               # ç’°å¢ƒè®Šæ•¸ï¼ˆä¸æäº¤åˆ° gitï¼‰
â”œâ”€â”€ .gitignore                         # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md                          # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
â”œâ”€â”€ VIBE_CODING_PROMPT.md              # æœ¬æ–‡ä»¶
â”‚
â”œâ”€â”€ services/                          # æ¥­å‹™é‚è¼¯æœå‹™å±¤
â”‚   â”œâ”€â”€ auth.js                       # OAuth2 å®¢æˆ¶ç«¯é…ç½®
â”‚   â”œâ”€â”€ calendarService.js            # Google Calendar API å°è£
â”‚   â”œâ”€â”€ geminiService.js              # Gemini AI æœå‹™
â”‚   â””â”€â”€ conversationService.js        # å°è©±æ­·å²ç®¡ç†
â”‚
â”œâ”€â”€ public/                            # éœæ…‹å‰ç«¯æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html                    # ä¸»é é¢
â”‚   â”œâ”€â”€ app.js                        # å‰ç«¯é‚è¼¯
â”‚   â””â”€â”€ style.css                     # æ¨£å¼è¡¨
â”‚
â””â”€â”€ [é©—è­‰è…³æœ¬]                         # å¯é¸çš„é©—è­‰å·¥å…·
    â”œâ”€â”€ verify_gemini.js              # Gemini API æ¸¬è©¦
    â”œâ”€â”€ verify_calendar.js            # Calendar API æ¸¬è©¦
    â”œâ”€â”€ verify_calendar_flow.js        # OAuth æµç¨‹æ¸¬è©¦
    â””â”€â”€ list_models.js                # åˆ—å‡ºå¯ç”¨ Gemini æ¨¡å‹
```

---

## ğŸ¯ åŠŸèƒ½éœ€æ±‚è¦æ ¼

### 1. ä½¿ç”¨è€…èªè­‰
- **åŠŸèƒ½**: Google OAuth2 ç™»å…¥
- **æµç¨‹**:
  1. ä½¿ç”¨è€…é»æ“Šã€Œé€£çµ Google æ—¥æ›†ã€æŒ‰éˆ•
  2. é‡å®šå‘åˆ° Google æˆæ¬Šé é¢
  3. æˆæ¬Šå¾Œå›èª¿åˆ° `/auth/google/callback`
  4. ç²å– access token ä¸¦ä¿å­˜
  5. é‡å®šå‘åˆ°é¦–é ä¸¦é¡¯ç¤º `?auth=success`
- **æ¬Šé™ç¯„åœ**:
  - `https://www.googleapis.com/auth/calendar`
  - `https://www.googleapis.com/auth/calendar.events`

### 2. è¡Œäº‹æ›†é¡¯ç¤º
- **åŠŸèƒ½**: ä½¿ç”¨ FullCalendar é¡¯ç¤ºè¡Œäº‹æ›†
- **è¦–åœ–æ¨¡å¼**: 
  - æœˆè¦–åœ– (dayGridMonth)
  - é€±è¦–åœ– (timeGridWeek) - é è¨­
  - æ—¥è¦–åœ– (timeGridDay)
- **ç‰¹æ€§**:
  - ç¹é«”ä¸­æ–‡ä»‹é¢
  - è‡ªå‹•ç²å–ç•¶å‰è¦–åœ–æ™‚é–“ç¯„åœå…§çš„æ‰€æœ‰äº‹ä»¶
  - æ”¯æ´æ‹–æ‹½èª¿æ•´äº‹ä»¶æ™‚é–“
  - é»æ“Šäº‹ä»¶é¡¯ç¤ºè©³æƒ…å½ˆçª—
  - æ”¯æ´å…¨å¤©äº‹ä»¶å’Œå®šæ™‚äº‹ä»¶
- **äº‹ä»¶ç²å–**:
  - æ ¹æ“šè¦–åœ–æ™‚é–“ç¯„åœå‹•æ…‹ç²å–
  - æ”¯æ´åˆ†é ç²å–æ‰€æœ‰äº‹ä»¶ï¼ˆç„¡æ•¸é‡é™åˆ¶ï¼‰
  - è‡ªå‹•è™•ç†æ™‚å€è½‰æ›

### 3. äº‹ä»¶è©³æƒ…å½ˆçª—
- **è§¸ç™¼**: é»æ“Šè¡Œäº‹æ›†ä¸Šçš„ä»»ä½•äº‹ä»¶
- **é¡¯ç¤ºå…§å®¹**:
  - äº‹ä»¶æ¨™é¡Œ
  - æ™‚é–“ï¼ˆæ ¼å¼åŒ–é¡¯ç¤ºï¼Œæ”¯æ´å…¨å¤©äº‹ä»¶ï¼‰
  - æè¿°
  - åœ°é»
  - åƒèˆ‡è€…åˆ—è¡¨ï¼ˆå«å›æ‡‰ç‹€æ…‹ï¼‰
  - ä¸»è¾¦äºº
  - ã€Œåœ¨ Google æ—¥æ›†ä¸­é–‹å•Ÿã€é€£çµ
- **æ¨£å¼**: Google Calendar é¢¨æ ¼è¨­è¨ˆ
- **äº’å‹•**: é»æ“Šå¤–éƒ¨æˆ–é—œé–‰æŒ‰éˆ•å¯é—œé–‰

### 4. AI å°è©±åŠŸèƒ½
- **åŠŸèƒ½**: è‡ªç„¶èªè¨€è™•ç†è¡Œäº‹æ›†æ“ä½œ
- **æ”¯æ´çš„æ“ä½œ**:
  - `list`: æŸ¥è©¢è¡Œç¨‹
  - `insert`: æ–°å¢è¡Œç¨‹
  - `update`: ä¿®æ”¹è¡Œç¨‹
  - `delete`: åˆªé™¤è¡Œç¨‹
  - `check_conflict`: æª¢æŸ¥è¡çª
  - `unknown`: ç„¡æ³•ç†è§£
- **å°è©±è¨˜æ†¶**:
  - è‡ªå‹•ä¿å­˜æ¯è¼ªå°è©±
  - ä¿ç•™æœ€è¿‘ 20 è¼ªå°è©±
  - å‚³éæœ€è¿‘ 10 è¼ªçµ¦ AI ä½œç‚ºä¸Šä¸‹æ–‡
  - æ”¯æ´å¼•ç”¨ã€Œå‰›æ‰ã€ã€ã€Œä¹‹å‰ã€ã€ã€Œé‚£å€‹ã€ç­‰è©å½™
- **ç¢ºèªæ©Ÿåˆ¶**:
  - æ–°å¢/ä¿®æ”¹/åˆªé™¤æ“ä½œéœ€è¦ä½¿ç”¨è€…ç¢ºèª
  - é¡¯ç¤ºç¢ºèªæ¨¡æ…‹æ¡†

### 5. äº‹ä»¶ç®¡ç†
- **CRUD æ“ä½œ**:
  - Create: é€é AI å°è©±æˆ–ç›´æ¥ API èª¿ç”¨
  - Read: æ ¹æ“šæ™‚é–“ç¯„åœç²å–äº‹ä»¶
  - Update: æ”¯æ´æ‹–æ‹½èª¿æ•´æ™‚é–“æˆ–é€é AI ä¿®æ”¹
  - Delete: é€é AI å°è©±åˆªé™¤
- **è¡çªåµæ¸¬**: AI è‡ªå‹•åˆ†æä¸¦å»ºè­°æ›¿ä»£æ™‚é–“

---

## ğŸ”Œ API è¦æ ¼

### èªè­‰ç«¯é»

#### `GET /auth/google`
- **æè¿°**: ç™¼èµ· Google OAuth ç™»å…¥
- **å›æ‡‰**: é‡å®šå‘åˆ° Google æˆæ¬Šé é¢

#### `GET /auth/google/callback`
- **æè¿°**: OAuth å›èª¿è™•ç†
- **åƒæ•¸**: `code` (query string)
- **å›æ‡‰**: é‡å®šå‘åˆ° `/?auth=success` æˆ– `/?auth=error`

### è¡Œäº‹æ›† API

#### `GET /api/calendar/events`
- **æè¿°**: ç²å–äº‹ä»¶åˆ—è¡¨
- **èªè­‰**: éœ€è¦ (checkAuth middleware)
- **æŸ¥è©¢åƒæ•¸**:
  - `timeMin` (å¯é¸): ISO 8601 æ™‚é–“å­—ä¸²
  - `timeMax` (å¯é¸): ISO 8601 æ™‚é–“å­—ä¸²
- **å›æ‡‰**: JSON é™£åˆ—ï¼ŒåŒ…å«äº‹ä»¶ç‰©ä»¶
- **ç‰¹æ€§**: æ”¯æ´åˆ†é ï¼Œè‡ªå‹•ç²å–æ‰€æœ‰ç¬¦åˆæ¢ä»¶çš„äº‹ä»¶

#### `POST /api/calendar/events`
- **æè¿°**: å‰µå»ºæ–°äº‹ä»¶
- **èªè­‰**: éœ€è¦
- **è«‹æ±‚é«”**: 
  ```json
  {
    "summary": "äº‹ä»¶æ¨™é¡Œ",
    "start": { "dateTime": "ISO 8601" },
    "end": { "dateTime": "ISO 8601" },
    "description": "æè¿°ï¼ˆå¯é¸ï¼‰",
    "location": "åœ°é»ï¼ˆå¯é¸ï¼‰"
  }
  ```
- **å›æ‡‰**: å‰µå»ºçš„äº‹ä»¶ç‰©ä»¶

#### `PATCH /api/calendar/events/:id`
- **æè¿°**: æ›´æ–°äº‹ä»¶
- **èªè­‰**: éœ€è¦
- **è·¯å¾‘åƒæ•¸**: `id` - äº‹ä»¶ ID
- **è«‹æ±‚é«”**: è¦æ›´æ–°çš„æ¬„ä½
- **å›æ‡‰**: æ›´æ–°å¾Œçš„äº‹ä»¶ç‰©ä»¶

#### `DELETE /api/calendar/events/:id`
- **æè¿°**: åˆªé™¤äº‹ä»¶
- **èªè­‰**: éœ€è¦
- **è·¯å¾‘åƒæ•¸**: `id` - äº‹ä»¶ ID
- **å›æ‡‰**: `{ "success": true }`

### å°è©± API

#### `POST /api/chat`
- **æè¿°**: è™•ç†ä½¿ç”¨è€…å°è©±
- **èªè­‰**: éœ€è¦
- **è«‹æ±‚é«”**: 
  ```json
  {
    "message": "ä½¿ç”¨è€…è¨Šæ¯"
  }
  ```
- **å›æ‡‰**: 
  ```json
  {
    "action": "list|insert|update|delete|check_conflict|unknown",
    "eventDetails": {
      "summary": "æ¨™é¡Œ",
      "start": { "dateTime": "ISO 8601" },
      "end": { "dateTime": "ISO 8601" },
      "eventId": "IDï¼ˆæ›´æ–°/åˆªé™¤æ™‚éœ€è¦ï¼‰"
    },
    "responseMessage": "AI å›æ‡‰ï¼ˆç¹é«”ä¸­æ–‡ï¼‰",
    "requiresConfirmation": boolean
  }
  ```
- **ç‰¹æ€§**: 
  - è‡ªå‹•ç²å–æœªä¾† 30 å¤©äº‹ä»¶ä½œç‚ºä¸Šä¸‹æ–‡
  - è‡ªå‹•ä¿å­˜å°è©±åˆ°æ­·å²è¨˜éŒ„

#### `POST /api/chat/clear`
- **æè¿°**: æ¸…ç©ºå°è©±æ­·å²
- **èªè­‰**: éœ€è¦
- **å›æ‡‰**: `{ "success": true, "message": "å°è©±æ­·å²å·²æ¸…ç©º" }`

#### `GET /api/chat/history/stats`
- **æè¿°**: ç²å–å°è©±æ­·å²çµ±è¨ˆ
- **èªè­‰**: éœ€è¦
- **å›æ‡‰**: 
  ```json
  {
    "totalConversations": 10,
    "oldestTimestamp": "ISO 8601",
    "newestTimestamp": "ISO 8601"
  }
  ```

---

## ğŸ’» å¯¦ç¾ç´°ç¯€

### Backend å¯¦ç¾

#### `server.js`
- Express æ‡‰ç”¨ç¨‹å¼å…¥å£
- éœæ…‹æ–‡ä»¶æœå‹™ (`public/`)
- CORS å’Œ body-parser ä¸­é–“ä»¶
- OAuth è·¯ç”±è™•ç†
- API è·¯ç”±å®šç¾©
- èªè­‰ä¸­é–“ä»¶ (`checkAuth`)
- éŒ¯èª¤è™•ç†

#### `services/auth.js`
- å‰µå»º OAuth2 å®¢æˆ¶ç«¯
- å¾ç’°å¢ƒè®Šæ•¸è®€å–é…ç½®
- å°å‡º `oauth2Client` ä¾›å…¶ä»–æœå‹™ä½¿ç”¨

#### `services/calendarService.js`
- `listEvents(timeMin, timeMax)`: ç²å–äº‹ä»¶åˆ—è¡¨
  - æ”¯æ´æ™‚é–“ç¯„åœéæ¿¾
  - è‡ªå‹•è™•ç†åˆ†é 
  - ç„¡ maxResults é™åˆ¶
- `insertEvent(event)`: å‰µå»ºäº‹ä»¶
- `updateEvent(eventId, event)`: æ›´æ–°äº‹ä»¶
- `deleteEvent(eventId)`: åˆªé™¤äº‹ä»¶

#### `services/geminiService.js`
- `processUserIntent(userMessage, currentContext, conversationHistory)`
- ä½¿ç”¨ `gemini-2.0-flash` æ¨¡å‹ï¼ˆå¯é€éç’°å¢ƒè®Šæ•¸é…ç½®ï¼‰
- è‡ªå‹•å˜—è©¦æ›¿ä»£æ¨¡å‹ï¼ˆå¦‚æœä¸»æ¨¡å‹å¤±æ•—ï¼‰
- å¼·å¥çš„ JSON è§£æï¼ˆè™•ç† markdown ä»£ç¢¼å¡Šï¼‰
- è©³ç´°çš„éŒ¯èª¤è™•ç†å’Œæ—¥èªŒè¨˜éŒ„

#### `services/conversationService.js`
- `addConversation(userMessage, assistantMessage, metadata)`: æ·»åŠ å°è©±
- `getHistory(limit)`: ç²å–å°è©±æ­·å²
- `getFormattedHistory(limit)`: ç²å–æ ¼å¼åŒ–çš„å°è©±æ­·å²
- `clearHistory()`: æ¸…ç©ºæ­·å²
- `getStats()`: ç²å–çµ±è¨ˆä¿¡æ¯
- æœ€å¤§ä¿ç•™ 20 è¼ªå°è©±

### Frontend å¯¦ç¾

#### `public/index.html`
- èªç¾©åŒ– HTML çµæ§‹
- FullCalendar CDN å¼•å…¥
- Google Fonts å¼•å…¥
- ä¸‰å€‹ä¸»è¦å€åŸŸï¼š
  - Headerï¼ˆæ¨™é¡Œå’Œç™»å…¥æŒ‰éˆ•ï¼‰
  - Mainï¼ˆè¡Œäº‹æ›†å’Œå°è©±æ¡†ï¼‰
  - Modalsï¼ˆç¢ºèªå’Œäº‹ä»¶è©³æƒ…å½ˆçª—ï¼‰

#### `public/app.js`
- FullCalendar åˆå§‹åŒ–
- äº‹ä»¶ç²å–é‚è¼¯ï¼ˆæ ¹æ“šè¦–åœ–æ™‚é–“ç¯„åœï¼‰
- äº‹ä»¶é»æ“Šè™•ç†ï¼ˆé¡¯ç¤ºè©³æƒ…å½ˆçª—ï¼‰
- äº‹ä»¶æ‹–æ‹½è™•ç†ï¼ˆæ›´æ–°æ™‚é–“ï¼‰
- å°è©±åŠŸèƒ½ï¼š
  - ç™¼é€è¨Šæ¯
  - è™•ç† AI å›æ‡‰
  - ç¢ºèªæ¨¡æ…‹æ¡†
  - åŸ·è¡Œæ“ä½œï¼ˆæ–°å¢/ä¿®æ”¹/åˆªé™¤ï¼‰
- äº‹ä»¶è©³æƒ…é¡¯ç¤ºé‚è¼¯

#### `public/style.css`
- CSS è®Šæ•¸å®šç¾©ï¼ˆGoogle é¢¨æ ¼è‰²å½©ï¼‰
- éŸ¿æ‡‰å¼å¸ƒå±€ï¼ˆFlexboxï¼‰
- Google Material Design é¢¨æ ¼æŒ‰éˆ•
- FullCalendar æ¨£å¼è¦†è“‹
- å°è©±æ¡†æ¨£å¼ï¼ˆé¡ä¼¼èŠå¤©æ‡‰ç”¨ï¼‰
- æ¨¡æ…‹æ¡†æ¨£å¼
- äº‹ä»¶è©³æƒ…å½ˆçª—æ¨£å¼

---

## âš™ï¸ ç’°å¢ƒé…ç½®

### ç’°å¢ƒè®Šæ•¸ (.env)

```bash
# Google OAuth2 é…ç½®
GOOGLE_CLIENT_ID=your_client_id_here
GOOGLE_CLIENT_SECRET=your_client_secret_here
REDIRECT_URI=http://localhost:3000/auth/google/callback

# Gemini API é…ç½®
GEMINI_API_KEY=your_gemini_api_key_here

# å¯é¸ï¼šæŒ‡å®š Gemini æ¨¡å‹ï¼ˆé è¨­: gemini-2.0-flashï¼‰
GEMINI_MODEL=gemini-2.0-flash

# ä¼ºæœå™¨é…ç½®
PORT=3000
```

### package.json ä¾è³´

```json
{
  "dependencies": {
    "@google/generative-ai": "^0.24.1",
    "body-parser": "^2.2.0",
    "cors": "^2.8.5",
    "dotenv": "^17.2.3",
    "express": "^5.1.0",
    "googleapis": "^166.0.0"
  }
}
```

### .gitignore

```
node_modules/
.env
.DS_Store
```

---

## ğŸ¨ UI/UX è¨­è¨ˆè¦æ ¼

### è‰²å½©ç³»çµ±
- **ä¸»è‰²**: `#1a73e8` (Google Blue)
- **ä¸»è‰²æ‡¸åœ**: `#1765cc`
- **èƒŒæ™¯**: `#ffffff`
- **æ–‡å­—ä¸»è‰²**: `#3c4043`
- **æ–‡å­—æ¬¡è‰²**: `#70757a`
- **é‚Šæ¡†**: `#dadce0`
- **é™°å½±**: Material Design æ¨™æº–é™°å½±

### å¸ƒå±€
- **Header é«˜åº¦**: 64px
- **å´é‚Šæ¬„å¯¬åº¦**: 360pxï¼ˆå°è©±æ¡†ï¼‰
- **éŸ¿æ‡‰å¼**: æ¡Œé¢å„ªå…ˆè¨­è¨ˆ

### å­—é«”
- **æ¨™é¡Œ**: Google Sans, 22px
- **æ­£æ–‡**: Roboto, 14px
- **æŒ‰éˆ•**: Google Sans, 14px, 500 weight

### äº’å‹•å…ƒç´ 
- **æŒ‰éˆ•**: åœ“è§’ 4px, é«˜åº¦ 36px
- **è¼¸å…¥æ¡†**: åœ“è§’ 24px, å…§é‚Šè· 12px 16px
- **æ¨¡æ…‹æ¡†**: åœ“è§’ 8px, æœ€å¤§å¯¬åº¦ 500px
- **éæ¸¡å‹•ç•«**: 0.2s ease

---

## ğŸ” å®‰å…¨è€ƒé‡

1. **èªè­‰æª¢æŸ¥**: æ‰€æœ‰ API ç«¯é»ï¼ˆé™¤èªè­‰ç›¸é—œï¼‰éƒ½éœ€è¦é€šé `checkAuth` ä¸­é–“ä»¶
2. **ç’°å¢ƒè®Šæ•¸**: æ•æ„Ÿä¿¡æ¯ï¼ˆAPI keys, secretsï¼‰å­˜å„²åœ¨ `.env`ï¼Œä¸æäº¤åˆ° git
3. **CORS**: å·²é…ç½® CORS ä¸­é–“ä»¶
4. **è¼¸å…¥é©—è­‰**: API ç«¯é»æª¢æŸ¥å¿…è¦åƒæ•¸
5. **éŒ¯èª¤è™•ç†**: ä¸å‘å®¢æˆ¶ç«¯æš´éœ²æ•æ„ŸéŒ¯èª¤ä¿¡æ¯

---

## ğŸ“ Gemini Prompt è¨­è¨ˆ

### ç³»çµ±æç¤ºè©çµæ§‹

```
ä½ æ˜¯ä¸€å€‹æ™ºæ…§è¡Œäº‹æ›†åŠ©ç†ã€‚
ç¾åœ¨æ™‚é–“: {currentTime}

ä¹‹å‰çš„å°è©±æ­·å²ï¼š
{conversationHistory}

ä½¿ç”¨è€…è¨Šæ¯: "{userMessage}"

ç›®å‰è¡Œäº‹æ›†ç‹€æ³ (Context): {currentEvents}

åˆ†æä½¿ç”¨è€…çš„éœ€æ±‚ä¸¦æ±ºå®šå‹•ä½œã€‚
è«‹å›å‚³ä¸€å€‹ JSON ç‰©ä»¶ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
{
  "action": "list" | "insert" | "update" | "delete" | "check_conflict" | "unknown",
  "eventDetails": {
    "summary": "è¡Œç¨‹æ¨™é¡Œ",
    "start": { "dateTime": "ISO String" },
    "end": { "dateTime": "ISO String" },
    "eventId": "å¦‚æœæ˜¯æ›´æ–°æˆ–åˆªé™¤ï¼Œè«‹å¡«å…¥ ID"
  },
  "responseMessage": "ç”¨ç¹é«”ä¸­æ–‡è‡ªç„¶èªè¨€å›è¦†ä½¿ç”¨è€…",
  "requiresConfirmation": boolean
}

è¦å‰‡ï¼š
- å¦‚æœæœ‰è¡Œç¨‹è¡çªï¼Œè«‹å°‡ action è¨­ç‚º "check_conflict" ä¸¦åœ¨ responseMessage ä¸­å»ºè­°æ›¿ä»£æ–¹æ¡ˆã€‚
- å¦‚æœæ˜¯åˆªé™¤æˆ–ä¿®æ”¹ï¼Œè«‹å‹™å¿…å°‡ requiresConfirmation è¨­ç‚º trueã€‚
- å¦‚æœæ˜¯æ–°å¢è¡Œç¨‹ï¼Œä¹Ÿå»ºè­°å°‡ requiresConfirmation è¨­ç‚º true ä»¥ä¾¿ç¢ºèªã€‚
- åªå›å‚³ JSONï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—æˆ–èªªæ˜ã€‚
- ç¢ºä¿ JSON æ ¼å¼æ­£ç¢ºï¼Œæ‰€æœ‰å­—ä¸²éƒ½è¦ç”¨é›™å¼•è™Ÿã€‚
- å¦‚æœç„¡æ³•ç†è§£ä½¿ç”¨è€…æ„åœ–ï¼Œaction è¨­ç‚º "unknown"ï¼ŒresponseMessage ç”¨ç¹é«”ä¸­æ–‡èªªæ˜ã€‚
- è«‹æ ¹æ“šä¹‹å‰çš„å°è©±å…§å®¹ä¾†ç†è§£ä½¿ç”¨è€…çš„æ„åœ–ã€‚å¦‚æœä½¿ç”¨è€…æåˆ°ã€Œå‰›æ‰ã€ã€ã€Œä¹‹å‰ã€ã€ã€Œé‚£å€‹ã€ç­‰è©å½™ï¼Œè«‹åƒè€ƒå°è©±æ­·å²ä¾†ç†è§£ã€‚

é‡è¦ï¼šåªå›å‚³ JSON ç‰©ä»¶ï¼Œä¸è¦æœ‰ä»»ä½•å‰ç¶´æˆ–å¾Œç¶´æ–‡å­—ã€‚
```

---

## ğŸš€ éƒ¨ç½²èªªæ˜

### æœ¬åœ°é–‹ç™¼

1. å®‰è£ä¾è³´: `npm install`
2. é…ç½® `.env` æ–‡ä»¶
3. å•Ÿå‹•ä¼ºæœå™¨: `node server.js` æˆ– `npm start`
4. è¨ªå•: `http://localhost:3000`

### ç”Ÿç”¢ç’°å¢ƒ

1. æ›´æ–° `.env` ä¸­çš„ `REDIRECT_URI` ç‚ºç”Ÿç”¢åŸŸå
2. åœ¨ Google Cloud Console æ›´æ–° OAuth æˆæ¬Š URI
3. ä½¿ç”¨ PM2 æˆ–é¡ä¼¼å·¥å…·ç®¡ç†é€²ç¨‹
4. é…ç½® HTTPSï¼ˆGoogle OAuth è¦æ±‚ï¼‰

---

## ğŸ§ª æ¸¬è©¦å’Œé©—è­‰

### é©—è­‰è…³æœ¬

- `verify_gemini.js`: æ¸¬è©¦ Gemini API é€£æ¥
- `verify_calendar.js`: æ¸¬è©¦ Calendar API é€£æ¥
- `verify_calendar_flow.js`: æ¸¬è©¦å®Œæ•´ OAuth æµç¨‹
- `list_models.js`: åˆ—å‡ºå¯ç”¨çš„ Gemini æ¨¡å‹

### æ¸¬è©¦æµç¨‹

1. åŸ·è¡Œ `node verify_gemini.js` ç¢ºèª Gemini API æ­£å¸¸
2. åŸ·è¡Œ `node verify_calendar.js` ç¢ºèª Calendar API æ­£å¸¸
3. å•Ÿå‹•ä¼ºæœå™¨ä¸¦æ¸¬è©¦å®Œæ•´æµç¨‹

---

## ğŸ“‹ é—œéµå¯¦ç¾è¦é»

### 1. äº‹ä»¶ç²å–å„ªåŒ–
- ä½¿ç”¨ FullCalendar çš„ `info.start` å’Œ `info.end` ç²å–è¦–åœ–æ™‚é–“ç¯„åœ
- å¾Œç«¯æ”¯æ´åˆ†é ï¼Œç¢ºä¿ç²å–æ‰€æœ‰äº‹ä»¶
- è™•ç†æ™‚å€è½‰æ›

### 2. å°è©±è¨˜æ†¶å¯¦ç¾
- æ¯è¼ªå°è©±è‡ªå‹•ä¿å­˜
- é™åˆ¶æ­·å²é•·åº¦é¿å… token éå¤š
- æ ¼å¼åŒ–æ­·å²ä¾› AI ç†è§£

### 3. éŒ¯èª¤è™•ç†
- Gemini API æ¨¡å‹è‡ªå‹•åˆ‡æ›
- JSON è§£æå®¹éŒ¯è™•ç†
- è©³ç´°çš„æ—¥èªŒè¨˜éŒ„

### 4. UI/UX ç´°ç¯€
- Google Calendar é¢¨æ ¼è¨­è¨ˆ
- éŸ¿æ‡‰å¼å¸ƒå±€
- æµæš¢çš„å‹•ç•«éæ¸¡
- æ¸…æ™°çš„è¦–è¦ºå±¤æ¬¡

---

## ğŸ¯ æœªä¾†æ“´å±•å»ºè­°

1. **å¤šç”¨æˆ¶æ”¯æ´**: ä½¿ç”¨è³‡æ–™åº«å­˜å„²ç”¨æˆ¶ token å’Œå°è©±æ­·å²
2. **æŒä¹…åŒ–å­˜å„²**: å°è©±æ­·å²å­˜å„²åˆ°è³‡æ–™åº«è€Œéå…§å­˜
3. **é€šçŸ¥åŠŸèƒ½**: æ•´åˆ Google Calendar é€šçŸ¥
4. **èªéŸ³è¼¸å…¥**: æ•´åˆèªéŸ³è­˜åˆ¥
5. **ç§»å‹•ç«¯å„ªåŒ–**: éŸ¿æ‡‰å¼è¨­è¨ˆæ”¹é€²
6. **åœ‹éš›åŒ–**: æ”¯æ´å¤šèªè¨€
7. **ä¸»é¡Œåˆ‡æ›**: æ·±è‰²æ¨¡å¼æ”¯æ´

---

## ğŸ“š åƒè€ƒè³‡æº

- [Google Calendar API æ–‡æª”](https://developers.google.com/calendar/api)
- [Google Gemini API æ–‡æª”](https://ai.google.dev/docs)
- [FullCalendar æ–‡æª”](https://fullcalendar.io/docs)
- [Express.js æ–‡æª”](https://expressjs.com/)

---

## âœ… æª¢æŸ¥æ¸…å–®

ä½¿ç”¨æ­¤æ–‡ä»¶é‡å»ºå°ˆæ¡ˆæ™‚ï¼Œç¢ºä¿ï¼š

- [ ] æ‰€æœ‰ä¾è³´å·²å®‰è£
- [ ] `.env` æ–‡ä»¶å·²æ­£ç¢ºé…ç½®
- [ ] Google Cloud å°ˆæ¡ˆå·²è¨­å®š OAuth
- [ ] Gemini API Key å·²å–å¾—
- [ ] OAuth å›èª¿ URI å·²æ­£ç¢ºé…ç½®
- [ ] æ‰€æœ‰æœå‹™æ–‡ä»¶å·²å‰µå»º
- [ ] å‰ç«¯æ–‡ä»¶çµæ§‹å®Œæ•´
- [ ] æ¨£å¼è¡¨å·²æ‡‰ç”¨
- [ ] æ¸¬è©¦è…³æœ¬å¯æ­£å¸¸é‹è¡Œ
- [ ] ä¼ºæœå™¨å¯æ­£å¸¸å•Ÿå‹•

---

**æœ€å¾Œæ›´æ–°**: 2025-11-19
**ç‰ˆæœ¬**: 1.0.0

